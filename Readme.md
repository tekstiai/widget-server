# TekstiAI Widget authentication server

## Introduction

This README provides guidance on how to implement and use the TekstiAI Widget Authentication Server. This server, built with Node.js and Express, is designed to handle authentication and relay questions to the TekstiAI widget.

## Prerequisites

- Node.js installed
- Knowledge of Express.js and Node.js environments
- Access to the server environment variables (CLIENT_ID, CLIENT_SECRET, TOKEN_ENDPOINT, SSL_KEY_FILE, SSL_CRT_FILE)

## Installation

1. **Clone the Repository**
    
    - Clone or download the server code to your local environment.
2. **Install Dependencies**
    
    - Navigate to the project directory and run `npm install` to install all required dependencies.
3. **Environment Setup**
    
    - Create a `.env` file in the root of the project.
    - Add the necessary environment variables: `CLIENT_ID`, `CLIENT_SECRET`, `TOKEN_ENDPOINT`, and `PORT`
    - You can omit development time code, which also eliminates need for `SSL_KEY_FILE`, `SSL_CRT_FILE`

## Running the Server

- **Development Mode**: Run `npm run dev` to start the server in development mode with nodemon.
- **Production Mode**: Run `npm start` to start the server in production mode.

## Usage

1. **Authentication Endpoint (`/getAccessToken`)**:
    
    - This endpoint fetches an access token.
    - Use this token in subsequent requests to authenticate with the TekstiAI widget.
2. **Relay Question Endpoint (`/relayQuestion`)**:
    
    - Allows sending questions to the TekstiAI widget.
    - Requires the following in the request body:
        - `apiUrl`: The URL to which the question should be sent.
        - `organisationKey`: Your organization's unique key.
        - `questionData`: The data of the question being sent.

## Security Considerations

- Ensure SSL/TLS is configured correctly for secure communication in production.
- Keep all environment variables and sensitive information secure.

## Troubleshooting

- Check server logs for error messages.
- Ensure all environment variables are correctly set.
- Verify network connectivity and endpoint accessibility.